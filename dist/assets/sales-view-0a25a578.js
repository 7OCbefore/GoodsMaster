import{i as R,r as b,g as $,o as a,a as l,b as s,j as O,v as V,F as j,k as N,f as y,t as r,m as w,d as f,l as pt,u as p,p as A,w as z,T as E}from"./vue-vendor-1f2ac135.js";import{u as vt}from"./inbox-view-72564b2b.js";import"./supabase-vendor-75f53c49.js";const yt={class:"flex flex-col h-full bg-surface pt-safe"},bt={class:"px-4 py-2 bg-surface z-10 flex gap-3 items-center"},gt={class:"bg-white rounded-xl flex items-center px-3 py-2.5 shadow-sm flex-1"},ht={class:"flex flex-1 overflow-hidden pb-[80px]"},mt={class:"w-20 flex flex-col items-center py-4 gap-4 bg-white border-r border-gray-100"},wt=["onClick"],_t={class:"text-[9px] font-bold"},kt={class:"flex-1 overflow-y-auto p-4 bg-white rounded-tl-[32px] shadow-inner hide-scrollbar"},Ct={class:"grid grid-cols-2 gap-3"},qt=["onClick"],$t={key:0,class:"ph-bold ph-bookmark-simple text-[10px] ml-1 text-gray-400",title:"来自商品目录"},jt={key:1,class:"ph-bold ph-plus-circle text-[10px] ml-1 text-blue-500",title:"新商品"},Nt={class:"flex justify-between items-end"},St=["onClick"],Pt={key:0},It={key:1,class:"text-orange-500 text-xs"},Tt={key:2,class:"text-blue-500 text-xs"},Ft=["onClick"],Dt={key:0,class:"h-full flex flex-col items-center justify-center opacity-40"},Lt={key:0,class:"fixed bottom-[90px] left-4 right-4 z-30 animate-pop"},Ot={class:"bg-[#0A84FF] text-white rounded-[24px] p-2 pl-5 pr-2 shadow-2xl shadow-blue-500/40 flex items-center justify-between border border-white/10 backdrop-blur-md"},Vt={class:"text-[10px] text-white/60 font-bold uppercase tracking-wider"},At={class:"text-xl font-bold"},zt={key:0,class:"fixed inset-0 z-[100] flex flex-col justify-end"},Et={class:"bg-surface w-full rounded-t-[32px] p-6 pb-safe relative z-10 max-h-[90vh] flex flex-col shadow-2xl animate-fade-in"},Gt={class:"flex justify-between items-center mb-6 shrink-0"},Mt={key:0,class:"mb-4 p-3 rounded-xl bg-orange-50 flex items-center"},Jt={class:"text-orange-800 text-sm font-bold"},Bt={class:"flex-1 overflow-y-auto space-y-3 mb-6 pr-1 hide-scrollbar"},Qt={class:"flex-1 mr-3"},Ut={class:"font-bold text-primary truncate"},Ht={class:"flex items-center gap-2 mt-1"},Rt=["onClick"],Kt={class:"text-[10px] text-gray-400"},Wt={class:"flex items-center gap-2 bg-surface rounded-xl p-1 shadow-inner"},Xt=["onClick"],Yt=["onUpdate:modelValue","onBlur"],Zt=["onClick"],te={class:"border-t border-gray-200 pt-4 shrink-0 space-y-4 pb-safe mb-2"},ee={key:0,class:"fixed inset-0 z-[100] flex flex-col justify-end"},se={class:"bg-surface w-full h-[95vh] rounded-t-[32px] p-0 pb-safe relative z-10 flex flex-col shadow-2xl animate-fade-in overflow-hidden"},oe={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-white"},ne={class:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50"},ae={key:0,class:"text-center text-gray-400 py-10 text-sm"},le=["onClick"],re={key:0,class:"absolute inset-0 bg-gray-100/50 z-10 flex items-center justify-center pointer-events-none"},ie={class:"flex justify-between items-center"},de={class:"font-bold text-lg text-primary"},ue={class:"text-[10px] text-gray-500 font-medium"},ce={class:"text-right"},fe={class:"text-xs font-bold text-success"},xe={class:"text-[10px] text-gray-400 mt-0.5"},pe={key:0,class:"fixed inset-0 z-[110] flex flex-col justify-end"},ve={class:"bg-surface w-full h-[85vh] rounded-t-[32px] relative z-10 flex flex-col shadow-2xl animate-fade-in overflow-hidden"},ye={class:"bg-white px-6 py-4 border-b border-gray-100 flex justify-between items-center shrink-0"},be={key:0,class:"flex-1 overflow-y-auto p-5 bg-gray-50"},ge={class:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 relative overflow-hidden"},he={key:0,class:"absolute right-4 top-4 border-2 border-gray-300 text-gray-300 font-bold px-2 py-1 rounded rotate-12 text-sm"},me={class:"flex justify-between items-start mb-6"},we={class:"font-bold text-primary text-lg"},_e={class:"text-right"},ke={class:"text-sm font-bold text-gray-600"},Ce={class:"space-y-3 mb-6 border-t border-dashed border-gray-200 pt-4"},qe={class:"font-bold text-primary"},$e={class:"text-[10px] text-gray-400 mt-0.5"},je={class:"text-right"},Ne={class:"font-bold"},Se={class:"text-[10px] text-success font-medium"},Pe={class:"border-t border-gray-100 pt-4 space-y-2"},Ie={class:"flex justify-between text-sm"},Te={class:"font-bold text-primary"},Fe={class:"flex justify-between text-sm"},De={class:"font-bold text-success"},Le={key:1,class:"mt-4 bg-yellow-50 p-3 rounded-xl border border-yellow-100 text-xs text-yellow-700"},Oe={key:1,class:"bg-white p-4 border-t border-gray-100 pb-safe grid grid-cols-2 gap-3 shrink-0"},Je={__name:"SalesView",setup(Ve){const K=vt(),{inventoryList:F,goodsList:W,sellPrice:_,formatCurrency:u,salesHistory:D,refundOrder:X,updateOrderNote:Y,packages:G,user:Ae,loadData:ze,recordSale:Z,addGood:tt}=K,x=R("showToast"),g=R("showDialog"),S=b("all"),h=b(""),k=b(!1),P=b(!1),i=b([]),m=b(""),et=[{key:"all",label:"全部",icon:"ph-squares-four"},{key:"hot",label:"热销",icon:"ph-fire"},{key:"low",label:"低库存",icon:"ph-warning"}],st=$(()=>{const o=F.value,e=W.value||[],t=new Map;return o.forEach(n=>{t.set(n.name,{...n,hasInventory:!0,inGoodsList:!0})}),e.forEach(n=>{t.has(n.name)||t.set(n.name,{name:n.name,quantity:0,averageCost:0,hasInventory:!1,inGoodsList:!0,category:n.category,unit:n.unit})}),Array.from(t.values())}),M=$(()=>{let o=st.value;if(h.value&&(o=o.filter(e=>e.name.includes(h.value))),S.value==="hot"){const e={};D.value.forEach(t=>{t.status!=="refunded"&&t.items.forEach(n=>e[n.name]=(e[n.name]||0)+n.quantity)}),o=[...o].sort((t,n)=>(e[n.name]||0)-(e[t.name]||0))}else S.value==="low"&&(o=o.filter(e=>e.quantity<5));return h.value&&o.length===0&&(o=[{name:h.value,quantity:0,averageCost:0,hasInventory:!1,inGoodsList:!1,isNew:!0,category:"未分类",unit:"个"}]),o}),I=$(()=>i.value.reduce((o,e)=>o+e.sellPrice*e.quantity,0)),J=$(()=>i.value.reduce((o,e)=>o+e.quantity,0)),B=$(()=>i.value.filter(o=>o.quantity>o.maxStock).length);function L(o){const e=i.value.find(t=>t.name===o.name);if(e)e.quantity++,e.maxStock=o.quantity;else{let t=_.value[o.name];t||(t=Math.ceil(o.averageCost*1.1),(o.isNew||o.averageCost===0)&&x("新商品，请设置售价","warning")),i.value.push({name:o.name,quantity:1,sellPrice:t,costSnapshot:o.averageCost||0,maxStock:o.quantity})}navigator.vibrate&&navigator.vibrate(10)}function Q(o,e){const t=i.value[o],n=parseInt(t.quantity)+e;n<=0?i.value.splice(o,1):t.quantity=n}function ot(o){const e=i.value[o],t=parseInt(e.quantity);if(isNaN(t)||t<=0){e.quantity=1;return}}async function nt(o,e){let t=null;o.hasInventory&&(t=G.value.filter(v=>v.content===o.name&&v.verified).sort((v,T)=>T.timestamp-v.timestamp)[0]);const n=t?t.costPrice:o.averageCost>0?o.averageCost:0,c=e-o.quantity,q={id:Math.random()+Date.now(),batchId:`jit_${Date.now()}`,tracking:`JIT_ADJUST_${Date.now()}`,content:o.name,quantity:c,costPrice:n>0?n:1,note:"JIT库存修正",verified:!0,timestamp:Date.now()};return G.value.unshift(q),new Promise(v=>{setTimeout(()=>{const T=F.value.find(xt=>xt.name===o.name);v(T?{success:!0,updatedItem:T}:{success:!1})},100)})}async function U(o){g({title:"添加新商品",content:`您确定要添加新商品 "${o.name}" 吗？`,confirmText:"添加",action:async()=>{try{const e=await tt({name:o.name,category:o.category||"未分类",unit:o.unit||"个"});if(e.error)throw new Error(e.error.message);x(`新商品 "${o.name}" 已添加`,"success"),L({name:o.name,quantity:0,averageCost:0,hasInventory:!1,inGoodsList:!0,isNew:!1})}catch(e){x(`添加商品失败: ${e.message}`,"error")}}})}async function at(){if(i.value.length===0)return;const o=i.value.filter(e=>e.quantity>e.maxStock);if(o.length>0){let e=`检测到以下商品库存不足，将执行自动修正并入库：

`;o.forEach(t=>{const n=t.quantity-t.maxStock;e+=`• ${t.name}：需 ${t.quantity}，存 ${t.maxStock}（补 +${n}）
`}),g({title:"库存自动修正",content:e,confirmText:"一键修正并开单",cancelText:"取消",action:async()=>{for(const t of o){const n=i.value.find(c=>c.name===t.name);if(n){const c=F.value.find(q=>q.name===t.name);c&&await nt(c,n.quantity)}}H()}})}else H()}async function H(){const o={id:Date.now().toString(),timestamp:new Date().toISOString(),customer:m.value,totalAmount:I.value,totalProfit:i.value.reduce((t,n)=>t+(n.sellPrice-n.costSnapshot)*n.quantity,0),items:JSON.parse(JSON.stringify(i.value)),status:"completed",note:""},e=await Z(o);if(e.error){x("开单失败: "+e.error.message,"error");return}x("开单成功","success"),i.value=[],m.value="",k.value=!1}function lt(o){navigator.clipboard.writeText(o).then(()=>{x("货物清单已复制到剪贴板","success")}).catch(e=>{console.error("复制失败:",e),x("复制失败，请手动复制","error")})}function rt(){if(i.value.length===0){x("购物车为空，无法复制","warning");return}let o="";m.value&&(o+=`${m.value}

`),i.value.forEach((e,t)=>{const n=e.name,c=e.quantity,q=u(e.sellPrice),v=u(e.sellPrice*e.quantity);o+=`${t+1}. ${n}
`,o+=`   ¥${q} × ${c} = ¥${v}
`}),o+=`总计：¥${u(I.value)}
`,lt(o)}function it(o){g({title:`设置 "${o.name}" 售价`,content:`成本 ¥${u(o.averageCost)}`,isInput:!0,inputValue:_.value[o.name]||"",confirmText:"保存",action:e=>{const t=parseFloat(e);t>0&&(_.value[o.name]=t,x("售价已更新"))}})}function dt(o,e){g({title:`修改 "${o.name}" 售价`,content:`成本 ¥${u(o.costSnapshot)}`,isInput:!0,inputValue:o.sellPrice,confirmText:"保存",action:t=>{const n=parseFloat(t);n>0&&(i.value[e].sellPrice=n,x("售价已更新"))}})}const C=b(!1),d=b(null),ut=o=>{d.value=o,C.value=!0},ct=()=>{d.value&&g({title:"确认退单",content:"库存将自动恢复。",isDanger:!0,action:async()=>{const o=await X(d.value.id);o.error?x("退单失败: "+o.error.message,"error"):(x("已退单"),C.value=!1)}})},ft=()=>{d.value&&g({title:"备注",isInput:!0,inputValue:d.value.note||"",action:o=>{Y(d.value.id,o),x("备注已保存")}})};return(o,e)=>(a(),l("div",yt,[s("div",bt,[s("div",gt,[e[11]||(e[11]=s("i",{class:"ph ph-magnifying-glass text-gray-400 text-lg mr-2"},null,-1)),O(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>h.value=t),placeholder:"搜索商品...",class:"flex-1 bg-transparent outline-none text-sm font-bold text-primary placeholder-gray-300"},null,512),[[V,h.value]])]),s("button",{onClick:e[1]||(e[1]=t=>P.value=!0),class:"w-10 h-10 bg-white rounded-xl flex items-center justify-center text-primary shadow-sm active:scale-95 transition-transform"},[...e[12]||(e[12]=[s("i",{class:"ph-bold ph-clock-counter-clockwise text-xl"},null,-1)])])]),s("div",ht,[s("div",mt,[(a(),l(j,null,N(et,t=>s("button",{key:t.key,onClick:n=>S.value=t.key,class:y([S.value===t.key?"bg-[#0A84FF] text-white shadow-lg":"text-gray-400 bg-gray-50","w-12 h-12 rounded-2xl flex flex-col items-center justify-center gap-1 transition-all active:scale-95"])},[s("i",{class:y([t.icon,"ph-bold text-xl"])},null,2),s("span",_t,r(t.label),1)],10,wt)),64))]),s("div",kt,[s("div",Ct,[(a(!0),l(j,null,N(M.value,t=>(a(),l("div",{key:t.name,class:y(["bg-surface p-3 rounded-2xl relative transition-transform border border-transparent active:border-primary/10 group h-32 flex flex-col justify-between",t.quantity===0?"opacity-60":"opacity-100",!t.hasInventory&&t.inGoodsList?"bg-gray-50 border-dashed border-gray-300":"",t.isNew?"bg-blue-50 border border-blue-200":""])},[s("div",{class:y(["absolute top-2 right-2",["px-1.5 py-0.5 rounded text-[10px] font-bold shadow-sm pointer-events-none",t.quantity>0?"bg-white text-gray-400":t.isNew?"bg-blue-200 text-blue-700":"bg-gray-200 text-gray-500"]])},r(t.quantity),3),s("div",{onClick:n=>t.isNew?U(t):L(t),class:"flex-1 cursor-pointer"},[s("div",{class:y(["font-bold text-sm leading-tight line-clamp-2 mt-1",t.isNew?"text-blue-600":t.quantity===0?"text-gray-400":"text-primary"])},[w(r(t.name)+" ",1),!t.hasInventory&&t.inGoodsList&&!t.isNew?(a(),l("i",$t)):f("",!0),t.isNew?(a(),l("i",jt)):f("",!0)],2)],8,qt),s("div",Nt,[s("div",{onClick:pt(n=>!t.isNew&&it(t),["stop"]),class:"group/price cursor-pointer px-1 -ml-1 rounded hover:bg-gray-200/50 transition-colors"},[e[13]||(e[13]=s("div",{class:"text-[10px] text-gray-400 flex items-center gap-1"},[w("售价 "),s("i",{class:"ph-bold ph-pencil-simple text-[8px] opacity-0 group-hover/price:opacity-100"})],-1)),s("div",{class:y(["text-sm font-extrabold",t.isNew?"text-blue-500":t.quantity===0?"text-gray-400":"text-primary"])},[p(_)[t.name]&&!t.isNew?(a(),l("span",Pt,"¥"+r(p(_)[t.name]),1)):t.isNew?(a(),l("span",Tt,"新商品")):(a(),l("span",It,"未定价"))],2)],8,St),s("div",{onClick:n=>t.isNew?U(t):L(t),class:y(["w-7 h-7 rounded-full flex items-center justify-center shadow-lg active:scale-90 transition-transform cursor-pointer",t.isNew?"bg-blue-500 text-white shadow-blue-500/30":t.quantity>0?"bg-[#0A84FF] text-white shadow-blue-500/30":"bg-gray-300 text-gray-500"])},[...e[14]||(e[14]=[s("i",{class:"ph-bold ph-plus"},null,-1)])],10,Ft)])],2))),128))]),M.value.length===0?(a(),l("div",Dt,[...e[15]||(e[15]=[s("i",{class:"ph ph-shopping-cart text-4xl mb-2"},null,-1),s("span",{class:"text-xs font-bold"},"暂无商品",-1)])])):f("",!0)])]),J.value>0?(a(),l("div",Lt,[s("div",Ot,[s("div",{onClick:e[2]||(e[2]=t=>k.value=!0),class:"flex flex-col cursor-pointer"},[s("span",Vt,"共 "+r(J.value)+" 件",1),s("span",At,"¥"+r(p(u)(I.value)),1)]),s("button",{onClick:e[3]||(e[3]=t=>k.value=!0),class:"bg-white text-[#0A84FF] px-6 py-3 rounded-[20px] font-bold text-sm active:scale-95 transition-transform flex items-center gap-1"},[...e[16]||(e[16]=[w(" 去结算 ",-1),s("i",{class:"ph-bold ph-arrow-right"},null,-1)])])])])):f("",!0),A(E,{name:"fade"},{default:z(()=>[k.value?(a(),l("div",zt,[s("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:e[4]||(e[4]=t=>k.value=!1)}),s("div",Et,[e[23]||(e[23]=s("div",{class:"w-12 h-1.5 bg-gray-300 rounded-full mx-auto mb-6 shrink-0"},null,-1)),s("div",Gt,[e[18]||(e[18]=s("h2",{class:"text-2xl font-bold text-primary"},"购物车",-1)),s("button",{onClick:e[5]||(e[5]=t=>i.value=[]),class:"text-danger text-sm font-bold bg-danger/10 px-3 py-1 rounded-full"},[...e[17]||(e[17]=[s("i",{class:"ph-bold ph-trash"},null,-1),w(" 清空",-1)])])]),B.value>0?(a(),l("div",Mt,[e[19]||(e[19]=s("i",{class:"ph-fill ph-warning text-orange-500 text-lg mr-2"},null,-1)),s("div",Jt,r(B.value)+" 款商品超出库存，将于结算时自动修正 ",1)])):f("",!0),s("div",Bt,[(a(!0),l(j,null,N(i.value,(t,n)=>(a(),l("div",{key:n,class:y(["bg-white p-3 rounded-2xl flex justify-between items-center shadow-sm",{"border border-danger border-2":t.quantity>t.maxStock}])},[s("div",Qt,[s("div",Ut,r(t.name),1),s("div",Ht,[s("div",{onClick:c=>dt(t,n),class:"text-xs font-bold bg-gray-100 px-1.5 py-0.5 rounded text-gray-600 cursor-pointer hover:bg-primary/10 hover:text-primary transition-colors flex items-center gap-1"},[w(" ¥"+r(t.sellPrice)+" ",1),e[20]||(e[20]=s("i",{class:"ph-bold ph-pencil-simple text-[8px]"},null,-1))],8,Rt),s("span",Kt,"利润 ¥"+r(((t.sellPrice-t.costSnapshot)*t.quantity).toFixed(1)),1)])]),s("div",Wt,[s("button",{onClick:c=>Q(n,-1),class:"w-8 h-8 bg-white rounded-lg shadow-sm flex items-center justify-center text-primary font-bold"},"-",8,Xt),O(s("input",{type:"tel","onUpdate:modelValue":c=>t.quantity=c,onBlur:c=>ot(n),class:y(["w-10 bg-transparent text-center font-bold text-sm outline-none p-0 appearance-none",{"text-danger font-extrabold":t.quantity>t.maxStock}])},null,42,Yt),[[V,t.quantity]]),s("button",{onClick:c=>Q(n,1),class:"w-8 h-8 bg-[#0A84FF] text-white rounded-lg shadow-sm flex items-center justify-center font-bold"},"+",8,Zt)])],2))),128))]),s("div",te,[O(s("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>m.value=t),placeholder:"客户姓名 (选填)",class:"w-full bg-white p-3.5 rounded-2xl font-bold outline-none text-sm text-center shadow-sm focus:ring-2 focus:ring-primary/10 transition-all"},null,512),[[V,m.value]]),s("button",{onClick:rt,class:"w-full bg-gray-100 text-primary font-bold text-lg py-4 rounded-[24px] shadow-sm active:scale-[0.98] transition-transform flex justify-center items-center gap-2"},[...e[21]||(e[21]=[s("i",{class:"ph-bold ph-clipboard-text text-2xl"},null,-1),s("span",null,"复制货物清单",-1)])]),s("button",{onClick:at,class:"w-full bg-[#0A84FF] text-white font-bold text-lg py-4 rounded-[24px] shadow-xl active:scale-[0.98] transition-transform flex justify-center items-center gap-2"},[e[22]||(e[22]=s("i",{class:"ph-bold ph-check-circle text-2xl"},null,-1)),s("span",null,"开单 ¥"+r(p(u)(I.value)),1)])])])])):f("",!0)]),_:1}),A(E,{name:"fade"},{default:z(()=>[P.value?(a(),l("div",ee,[s("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:e[7]||(e[7]=t=>P.value=!1)}),s("div",se,[s("div",oe,[e[25]||(e[25]=s("h2",{class:"text-xl font-bold text-primary"},"销售记录",-1)),s("button",{onClick:e[8]||(e[8]=t=>P.value=!1),class:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center"},[...e[24]||(e[24]=[s("i",{class:"ph-bold ph-x text-lg"},null,-1)])])]),s("div",ne,[p(D).length===0?(a(),l("div",ae,"暂无记录")):f("",!0),(a(!0),l(j,null,N(p(D),t=>(a(),l("div",{key:t.id,onClick:n=>ut(t),class:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 relative overflow-hidden active:scale-[0.99] transition-transform"},[t.status==="refunded"?(a(),l("div",re,[...e[26]||(e[26]=[s("span",{class:"text-2xl font-bold text-gray-300 -rotate-12 border-4 border-gray-300 px-3 py-1 rounded-xl"},"已退单",-1)])])):f("",!0),s("div",ie,[s("div",null,[s("div",de,"¥"+r(p(u)(t.totalAmount)),1),s("div",ue,r(new Date(t.timestamp).toLocaleString()),1)]),s("div",ce,[s("div",fe,"+¥"+r(p(u)(t.totalProfit)),1),s("div",xe,r(t.customer||"散客")+" · "+r(t.items.length)+"种商品",1)])])],8,le))),128))])])])):f("",!0)]),_:1}),A(E,{name:"fade"},{default:z(()=>[C.value?(a(),l("div",pe,[s("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:e[9]||(e[9]=t=>C.value=!1)}),s("div",ve,[s("div",ye,[e[28]||(e[28]=s("h2",{class:"text-lg font-bold text-primary"},"订单详情",-1)),s("button",{onClick:e[10]||(e[10]=t=>C.value=!1),class:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center"},[...e[27]||(e[27]=[s("i",{class:"ph-bold ph-x text-lg"},null,-1)])])]),d.value?(a(),l("div",be,[s("div",ge,[d.value.status==="refunded"?(a(),l("div",he,"已退款")):f("",!0),s("div",me,[s("div",null,[e[29]||(e[29]=s("div",{class:"text-xs text-gray-400 mb-1"},"客户",-1)),s("div",we,r(d.value.customer||"散客"),1)]),s("div",_e,[e[30]||(e[30]=s("div",{class:"text-xs text-gray-400 mb-1"},"时间",-1)),s("div",ke,r(new Date(d.value.timestamp).toLocaleString()),1)])]),s("div",Ce,[(a(!0),l(j,null,N(d.value.items,t=>(a(),l("div",{key:t.name,class:"flex justify-between items-center text-sm"},[s("div",null,[s("div",qe,r(t.name),1),s("div",$e,"成本 ¥"+r(p(u)(t.costSnapshot))+" × "+r(t.quantity),1)]),s("div",je,[s("div",Ne,"¥"+r(p(u)(t.sellPrice*t.quantity)),1),s("div",Se,"赚 ¥"+r(p(u)((t.sellPrice-t.costSnapshot)*t.quantity)),1)])]))),128))]),s("div",Pe,[s("div",Ie,[e[31]||(e[31]=s("span",{class:"text-gray-500"},"总计金额",-1)),s("span",Te,"¥"+r(p(u)(d.value.totalAmount)),1)]),s("div",Fe,[e[32]||(e[32]=s("span",{class:"text-gray-500"},"总毛利",-1)),s("span",De,"+¥"+r(p(u)(d.value.totalProfit)),1)])]),d.value.note?(a(),l("div",Le,[e[33]||(e[33]=s("span",{class:"font-bold"},"备注：",-1)),w(" "+r(d.value.note),1)])):f("",!0)])])):f("",!0),d.value&&d.value.status!=="refunded"?(a(),l("div",Oe,[s("button",{onClick:ft,class:"py-3.5 rounded-xl font-bold text-primary bg-gray-100"},"修改备注"),s("button",{onClick:ct,class:"py-3.5 rounded-xl font-bold text-danger bg-danger/10"},"退单")])):f("",!0)])])):f("",!0)]),_:1})]))}};export{Je as default};
