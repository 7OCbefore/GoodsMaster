import{r as y,h as V,q as P,y as x,a as D,p as E,b as p,c as L,z as A,u as m,K as R,F as S,k,o as w,f as I,t as B,A as h,B as N,C as $,D as z}from"./vue-vendor-1f2ac135.js";import{u as U}from"./inbox-view-72564b2b.js";import{_ as j,a as q}from"./ui-components-e96c3250.js";import"./supabase-vendor-75f53c49.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function u(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function f(s){if(s.ep)return;s.ep=!0;const e=u(s);fetch(s.href,e)}})();const F="modulepreload",K=function(g,n){return new URL(g,n).href},T={},_=function(n,u,f){if(!u||u.length===0)return n();const s=document.getElementsByTagName("link");return Promise.all(u.map(e=>{if(e=K(e,f),e in T)return;T[e]=!0;const o=e.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(!!f)for(let l=s.length-1;l>=0;l--){const d=s[l];if(d.href===e&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const t=document.createElement("link");if(t.rel=o?"stylesheet":F,o||(t.as="script",t.crossOrigin=""),t.href=e,document.head.appendChild(t),o)return new Promise((l,d)=>{t.addEventListener("load",l),t.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>n())},W={class:"flex flex-col h-screen overflow-hidden bg-surface text-primary font-sans relative"},H={class:"flex-1 overflow-hidden relative mt-10 pt-6"},M={class:"glass-nav pb-safe fixed bottom-0 w-full z-50"},G={class:"flex justify-between items-center h-[60px] px-2"},J=["onClick"],Q={class:"text-[10px] font-medium"},X={__name:"App",setup(g){const n=h(()=>_(()=>import("./inbox-view-72564b2b.js").then(r=>r.I),["./inbox-view-72564b2b.js","./vue-vendor-1f2ac135.js","./supabase-vendor-75f53c49.js"],import.meta.url)),u=h(()=>_(()=>import("./inventory-view-d9794b97.js"),["./inventory-view-d9794b97.js","./inbox-view-72564b2b.js","./vue-vendor-1f2ac135.js","./supabase-vendor-75f53c49.js"],import.meta.url)),f=h(()=>_(()=>import("./sales-view-0a25a578.js"),["./sales-view-0a25a578.js","./vue-vendor-1f2ac135.js","./inbox-view-72564b2b.js","./supabase-vendor-75f53c49.js"],import.meta.url)),s=h(()=>_(()=>import("./dashboard-view-111b481b.js"),["./dashboard-view-111b481b.js","./vue-vendor-1f2ac135.js","./inbox-view-72564b2b.js","./supabase-vendor-75f53c49.js","./xlsx-f5126985.js","./DashboardView-e9ed41fe.css"],import.meta.url)),e=h(()=>_(()=>import("./settings-view-846c9461.js"),["./settings-view-846c9461.js","./inbox-view-72564b2b.js","./vue-vendor-1f2ac135.js","./supabase-vendor-75f53c49.js"],import.meta.url)),o=y({id:"default-user-id",email:"default@example.com"});y(!1),y(!1);const i=y("dashboard"),a=V({show:!1,msg:"",type:"success"}),t=V({show:!1,title:"",content:"",confirmText:"确定",isDanger:!1,isInput:!1,inputValue:"",action:null});P(async()=>{try{const r=U();r.user.value=o.value,await r.loadData(o.value.id)}catch(r){console.error("Error during initialization:",r),l("初始化过程中出现错误","error")}});const l=(r,v="success")=>{a.msg=r,a.type=v,a.show=!0,setTimeout(()=>a.show=!1,2500)},d=r=>{Object.assign(t,{show:!0,isInput:!1,isDanger:!1,inputValue:"",...r})},b=()=>t.show=!1;x("showToast",l),x("showDialog",d),x("currentUser",o);const O=()=>{t.action&&t.action(t.inputValue),b()},C=[{id:"inbox",label:"进货",icon:"ph-tray"},{id:"inventory",label:"库存",icon:"ph-package"},{id:"dashboard",label:"总览",icon:"ph-chart-pie-slice"},{id:"sales",label:"开单",icon:"ph-storefront"},{id:"settings",label:"设置",icon:"ph-gear"}];return(r,v)=>(w(),D("div",W,[E(j,{show:a.show,msg:a.msg,type:a.type},null,8,["show","msg","type"]),E(q,{show:t.show,title:t.title,content:t.content,confirmText:t.confirmText,isDanger:t.isDanger,isInput:t.isInput,inputValue:t.inputValue,"onUpdate:inputValue":v[0]||(v[0]=c=>t.inputValue=c),onClose:b,onConfirm:O},null,8,["show","title","content","confirmText","isDanger","isInput","inputValue"]),p("div",H,[(w(),L(R,null,[(w(),L(A(i.value==="inbox"?m(n):i.value==="inventory"?m(u):i.value==="dashboard"?m(s):i.value==="sales"?m(f):m(e))))],1024))]),p("nav",M,[p("div",G,[(w(),D(S,null,k(C,c=>p("button",{key:c.id,onClick:Z=>i.value=c.id,class:I(["flex-1 flex flex-col items-center justify-center gap-1 active:scale-90 transition-transform duration-200",i.value===c.id?"text-primary":"text-gray-400"])},[p("i",{class:I([[i.value===c.id?"ph-fill":"ph-bold",c.icon],"text-2xl"])},null,2),p("span",Q,B(c.label),1)],10,J)),64))])])]))}},Y=N({history:$(),routes:[]});z(X).use(Y).mount("#app");
